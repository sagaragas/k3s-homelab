all:
  vars:
    ansible_user: root
    ansible_python_interpreter: /usr/bin/python3
    
    # k3s configuration
    k3s_version: v1.31.3+k3s1
    k3s_token: "{{ lookup('env', 'K3S_TOKEN') | default('k3s-homelab-token', true) }}"
    
    # Cluster networking
    k3s_vip: 172.16.1.49
    k3s_api_port: 6443
    cluster_cidr: 10.42.0.0/16
    service_cidr: 10.43.0.0/16
    cluster_dns: 10.43.0.10

  children:
    k3s_cluster:
      children:
        k3s_servers:
          hosts:
            k3s-cp-1:
              ansible_host: 172.16.1.50
              k3s_server_init: true
            k3s-cp-2:
              ansible_host: 172.16.1.51
              k3s_server_init: false
        k3s_agents:
          hosts:
            k3s-worker-1:
              ansible_host: 172.16.1.52
            k3s-worker-2:
              ansible_host: 172.16.1.53

# Node specs (for reference)
# k3s-cp-1:    pve1, 4 cores, 8GB RAM, 50GB disk
# k3s-cp-2:    pve2, 4 cores, 8GB RAM, 50GB disk
# k3s-worker-1: pve1, 8 cores, 16GB RAM, 100GB disk
# k3s-worker-2: pve2, 8 cores, 16GB RAM, 100GB disk
